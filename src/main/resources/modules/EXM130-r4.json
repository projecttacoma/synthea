{
  "name": "EXM130-R4",
  "remarks": [
    "EXM130  Based on CMS130v7 - Colorectal Cancer Screening",
    "As of version 7.2.000, logic for DENOM is simply 'true' therefore all patients meeting IPOP will meet DENOM"
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "direct_transition": "NUMER_Date_Guard"
    },
    "IPP_Qualifying_Encounter": {
      "remarks": [
        "==============================================================================",
        "and exists AdultOutpatientEncounters.Qualifying Encounters(Measurement Period)",
        "=============================================================================="
      ],
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "valueset": {
        "url": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001",
        "display": "Office Visit"
      },
      "direct_transition": "Terminal"
    },
    "NUMER_Colonoscopy_Performed": {
      "type": "Procedure",
      "remarks": [
        "===========================================================================================================================",
        "define Colonoscopy Performed:",
        "[Procedure: Colonoscopy] Colonoscopy",
        "where Colonoscopy.status = 'completed'",
        "  and Global.'Normalize Onset'(Colonoscopy.performed) ends 10 years or less on or before end of 'Measurement Period'",
        "============================================================================================================================"
      ],
      "valueset": {
        "url": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.108.12.1020",
        "display": "Colonoscopy"
      },
      "direct_transition": "wait_for_mp_for_encounter"
    },
    "Terminal": {
      "type": "Terminal"
    },
    "wait_for_mp_for_encounter": {
      "type": "Guard",
      "allow": {
        "condition_type": "Date",
        "operator": "==",
        "year": 2019,
        "value": 0
      },
      "distributed_transition": [
        {
          "transition": "delay_in_mp",
          "distribution": 0.75
        },
        {
          "transition": "Terminal",
          "distribution": 0.25
        }
      ]
    },
    "NUMER_delay": {
      "type": "Delay",
      "direct_transition": "NUMER_Colonoscopy_Performed",
      "range": {
        "low": 1,
        "high": 10,
        "unit": "years"
      }
    },
    "NUMER_Date_Guard": {
      "type": "Guard",
      "allow": {
        "condition_type": "Date",
        "operator": ">",
        "year": 2009
      },
      "remarks": [
        "====================================================================================================================",
        "Global.CalendarAgeInYearsAt(FHIRHelpers.ToDate(Patient.birthDate), start of Measurement Period) in Interval[50, 75]",
        "===================================================================================================================="
      ],
      "distributed_transition": [
        {
          "transition": "NUMER_delay",
          "distribution": 0.75
        },
        {
          "transition": "wait_for_mp_for_encounter",
          "distribution": 0.25
        }
      ]
    },
    "delay_in_mp": {
      "type": "Delay",
      "direct_transition": "IPP_Qualifying_Encounter",
      "range": {
        "low": 1,
        "high": 365,
        "unit": "days"
      }
    }
  }
}
