{
    "name": "EXM130-R4",
    "remarks": [
      "EXM130  Based on CMS130v7 - Colorectal Cancer Screening",
      "As of version 7.2.000, logic for DENOM is simply 'true' therefore all patients meeting IPOP will meet DENOM"
    ],
    "states": {
      "Initial": {
        "type": "Initial",
        "direct_transition": "IPP_Age_Guard"
      },
      "IPP_Age_Guard": {
        "type": "Guard",
        "remarks": [
          "====================================================================================================================",
          "Global.CalendarAgeInYearsAt(FHIRHelpers.ToDate(Patient.birthDate), start of Measurement Period) in Interval[50, 75]",
          "===================================================================================================================="
        ],
        "allow": {
          "condition_type": "Age",
          "operator": ">=",
          "quantity": 51,
          "unit": "years"
        },
        "conditional_transition": [
            {
              "condition": {
                "condition_type": "Date",
                "operator": "==",
                "year": 2019
              },
              "transition": "IPP_Qualifying_Encounter"
            }
        ]
      },
      "IPP_Qualifying_Encounter": {
        "remarks": [
          "==============================================================================",
          "and exists AdultOutpatientEncounters.Qualifying Encounters(Measurement Period)",
          "=============================================================================="
        ],
        "type": "Encounter",
        "encounter_class": "ambulatory",
        "valueset": {
          "url": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001",
          "display": "Office Visit"
        },
        "distributed_transition": [
          {
            "distribution": 0.5,
            "transition": "NUMER_Colonoscopy_Performed"
          },
          {
            "distribution": 0.5,
            "transition": "Terminal"
          }
        ]      
      },
      "NUMER_Colonoscopy_Performed": {
        "type": "Procedure",
        "remarks": [
          "===========================================================================================================================",
          "define Colonoscopy Performed:",
	        "[Procedure: Colonoscopy] Colonoscopy",
          "where Colonoscopy.status = 'completed'",
          "  and Global.'Normalize Onset'(Colonoscopy.performed) ends 10 years or less on or before end of 'Measurement Period'",
          "============================================================================================================================"
        ],
        "valueset": {
          "url": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.108.12.1020",
          "display": "Colonoscopy"
        },
        "direct_transition": "Terminal"
      },
      "Terminal": {
        "type": "Terminal"
      }
    }
}
